@import "tailwindcss";
@custom-variant dark (&:where(.dark, .dark *));

:root {
  --color-primary: oklch(85% 0.199 91.936);
  --color-primary-content: oklch(14% 0.005 285.823);
  --color-secondary: oklch(41% 0.112 45.904);
  --color-secondary-content: oklch(96% 0.001 286.375);
  --color-accent: oklch(82% 0.189 84.429);
  --color-accent-content: oklch(20% 0.042 265.755);
  --color-neutral: oklch(21% 0.006 285.885);
  --color-neutral-content: oklch(50% 0.01 285);
  --color-base-100: oklch(96% 0.001 286.375);
  --color-base-200: oklch(92% 0.004 286.32);
  --color-base-300: oklch(87% 0.006 286.286);
  --color-base-content: oklch(21% 0.006 285.885);
  --color-success: oklch(84% 0.238 128.85);
  --color-error: oklch(64% 0.246 16.439);

  --radius-box: 9999px;
  --radius-field: 0.875rem;
  --radius-card: 1.125rem;
  --border: 1px;
  --glass-opacity: 0.6;
  --glass-blur: 16px;
  --glass-saturation: 150%;
  --glass-border-opacity: 0.1;
  --card-shadow: 0px 15px 20px -5px rgba(0, 0, 0, 0.08), 0px 8px 8px -5px rgba(0, 0, 0, 0.03);
  --card-shadow-hover: 0px 20px 25px -5px rgba(0, 0, 0, 0.1), 0px 10px 10px -5px rgba(0, 0, 0, 0.05);

  --layout-max-width: 64rem;
  --layout-pad-x-mobile: 1rem;
  --layout-pad-x-desktop: 1.5rem;
  --header-height: 4rem;
  --header-glass-opacity: 80%;
  --header-glass-blur: 12px;
  --glass-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
  --button-glass-blur: 10px;
}

html.dark {
  --color-base-100: oklch(18% 0.006 286);
  --color-base-200: oklch(23% 0.006 286);
  --color-base-300: oklch(28% 0.006 286);
  --color-base-content: oklch(92% 0.004 286);
  --color-neutral-content: oklch(60% 0.01 285);
  --glass-opacity: 0.3;
  --glass-border-opacity: 0.15;
  --card-shadow: 0px 15px 20px -5px rgba(0, 0, 0, 0.25);
  --card-shadow-hover: 0px 20px 25px -5px rgba(0, 0, 0, 0.35);
  --header-glass-opacity: 50%;
  --header-glass-blur: 16px;
  --glass-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
  color-scheme: dark;
}

html, body {
  width: 100%;
  min-height: 100%;
}

html {
  scrollbar-gutter: stable;
}

body {
  margin: 0;
  font-family: 'Inter', ui-sans-serif, system-ui, sans-serif;
  -webkit-font-smoothing: antialiased;
  background: var(--color-base-100);
  color: var(--color-base-content);
}

/* header glass */
#main-header {
  background-color: color-mix(in srgb, var(--color-base-100) var(--header-glass-opacity), transparent);
  backdrop-filter: blur(var(--header-glass-blur)) saturate(var(--glass-saturation));
  border-bottom: var(--border) solid color-mix(in srgb, var(--color-base-content) var(--glass-border-opacity), transparent);
  box-shadow: var(--glass-shadow);
}

/* footer glass */
footer {
  background-color: color-mix(in srgb, var(--color-base-100) var(--header-glass-opacity), transparent);
  backdrop-filter: blur(var(--header-glass-blur)) saturate(var(--glass-saturation));
}

/* layout contract */
.layout-container {
  width: 100%;
  max-width: var(--layout-max-width);
  margin: 0 auto;
  padding-left: var(--layout-pad-x-mobile);
  padding-right: var(--layout-pad-x-mobile);
}

@media (min-width: 768px) {
  .layout-container {
    padding-left: var(--layout-pad-x-desktop);
    padding-right: var(--layout-pad-x-desktop);
  }
}

.layout-main {
  padding-top: calc(var(--header-height) + 1rem);
}

@media (min-width: 768px) {
  .layout-main {
    padding-top: calc(var(--header-height) + 1.5rem);
  }
}

/* font utilities for header/footer */
.font-serif {
  font-family: 'Instrument Serif', serif;
}

.font-mono {
  font-family: 'IBM Plex Mono', monospace;
}

/* print: hide chrome */
@media print {
  header, footer { display: none !important; }
  .layout-main { padding-top: 0 !important; }
}

.app-shell {
  min-height: auto;
  margin-top: calc(-1 * var(--header-height) - 1rem);
  padding-top: calc(var(--header-height) + 1rem);
  background:
    radial-gradient(1200px 500px at 20% -10%, color-mix(in srgb, var(--color-primary) 18%, transparent), transparent),
    radial-gradient(1000px 450px at 90% -20%, color-mix(in srgb, var(--color-accent) 14%, transparent), transparent),
    linear-gradient(180deg, var(--color-base-100), var(--color-base-200));
}

@media (min-width: 768px) {
  .app-shell {
    margin-top: calc(-1 * var(--header-height) - 1.5rem);
    padding-top: calc(var(--header-height) + 1.5rem);
  }
}

.app-container {
  width: min(72rem, 100%);
  margin: 0 auto;
  padding: 2rem 1rem 3rem;
}

.app-topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1.5rem;
}

.brand-title {
  font-family: 'Instrument Serif', serif;
  font-size: clamp(2.1rem, 4vw, 3.2rem);
  line-height: 1;
  letter-spacing: -0.02em;
}

.section-subtle {
  color: var(--color-neutral-content);
}

@layer components {
  .card {
    transition: all 0.3s ease;
    background-color: color-mix(in srgb, var(--color-base-200) var(--glass-opacity), transparent);
    backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturation));
    border: var(--border) solid color-mix(in srgb, var(--color-base-content) var(--glass-border-opacity), transparent);
    border-radius: var(--radius-card);
    box-shadow: var(--card-shadow);
  }

  .card:hover {
    box-shadow: var(--card-shadow-hover);
    transform: translateY(-1px);
  }

  .glass-btn {
    border-radius: var(--radius-box);
    border: var(--border) solid color-mix(in srgb, var(--color-base-content) 12%, transparent);
    background: var(--color-base-100);
    color: var(--color-base-content);
    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.12);
    transition: all 0.2s ease;
  }

  .glass-btn:hover:not(:disabled) {
    transform: translateY(-1px);
    box-shadow: 0 10px 18px rgba(0, 0, 0, 0.15);
  }

  .glass-btn-secondary {
    border-radius: var(--radius-box);
    border: var(--border) solid color-mix(in srgb, var(--color-base-content) 16%, transparent);
    background: color-mix(in srgb, var(--color-base-200) 92%, var(--color-base-100));
    color: var(--color-base-content);
    transition: all 0.2s ease;
  }

  .glass-btn-secondary:hover:not(:disabled) {
    transform: translateY(-1px);
    background: var(--color-base-300);
  }

  .app-input {
    border-radius: var(--radius-field);
    border: var(--border) solid color-mix(in srgb, var(--color-base-content) 15%, transparent);
    background: var(--color-base-100);
    color: var(--color-base-content);
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.08);
    transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
  }

  .app-input:focus {
    border-color: color-mix(in srgb, var(--color-base-content) 45%, transparent);
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.08), 0 0 0 1px color-mix(in srgb, var(--color-base-content) 35%, transparent);
    outline: none;
  }

  .app-tablist {
    border-radius: var(--radius-box);
    border: var(--border) solid color-mix(in srgb, var(--color-base-content) 10%, transparent);
    background: color-mix(in srgb, var(--color-base-200) 92%, var(--color-base-100));
    padding: 0.35rem;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08), 0 2px 10px rgba(0, 0, 0, 0.05);
  }

  .app-tab-active {
    background: var(--color-base-100);
    color: var(--color-base-content);
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.12);
  }

  .app-tab-idle {
    color: var(--color-neutral-content);
  }

  .app-tab-idle:hover {
    color: var(--color-base-content);
  }

  .cutout-shell {
    border-radius: 1.125rem;
    border: var(--border) solid color-mix(in srgb, var(--color-base-content) 10%, transparent);
    background: color-mix(in srgb, var(--color-base-200) 90%, var(--color-base-100));
    box-shadow: inset 0 2px 3px rgba(255, 255, 255, 0.05), 0 4px 14px rgba(0, 0, 0, 0.06);
  }

  .cutout-panel {
    border-radius: 0.95rem;
    border: var(--border) solid color-mix(in srgb, var(--color-base-content) 8%, transparent);
    background: var(--color-base-100);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05), 0 3px 10px rgba(0, 0, 0, 0.06);
  }

  .concave-well {
    border-radius: 1.125rem;
    border: var(--border) solid color-mix(in srgb, var(--color-base-content) 10%, transparent);
    background: color-mix(in srgb, var(--color-base-200) 96%, var(--color-base-100));
    box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.12), inset 0 1px 1px rgba(255, 255, 255, 0.05);
  }

  .collapse-toggle {
    border-radius: 9999px;
    background: var(--color-base-100);
    border: 1px solid color-mix(in srgb, var(--color-base-content) 12%, transparent);
    width: 2.1rem;
    height: 2.1rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
  }

  .paste-textarea {
    padding-top: 10px !important;
    padding-bottom: 10px !important;
  }

  .yellow-scrollbar::-webkit-scrollbar {
    width: 8px;
  }

  .yellow-scrollbar::-webkit-scrollbar-track {
    background: transparent;
    margin-top: 10px;
    margin-bottom: 10px;
  }

  .yellow-scrollbar::-webkit-scrollbar-thumb {
    background: color-mix(in srgb, var(--color-primary) 85%, #facc15);
    background-clip: padding-box;
    border-radius: 9999px;
    border-left: 2px solid transparent;
    border-right: 2px solid transparent;
  }

  .yellow-scrollbar::-webkit-scrollbar-thumb:hover {
    background: color-mix(in srgb, var(--color-primary) 95%, #facc15);
  }
}
